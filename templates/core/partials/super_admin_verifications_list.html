{% if verifications %}
  <div class="activity-table">
    <table>
      <thead>
        <tr>
          <th>Email</th>
          <th>Code</th>
          <th>Status</th>
          <th>Attempts</th>
          <th>IP Address</th>
          <th>Device Info</th>
          <th>Created</th>
          <th>Expires</th>
        </tr>
      </thead>
      <tbody>
        {% for verification in verifications %}
          <tr>
            <td><strong>{{ verification.email }}</strong></td>
            <td><code>{{ verification.code }}</code></td>
            <td>
              {% if verification.is_used %}
                <span class="verification-status verification-used">Used</span>
              {% elif verification.expires_at < now %}
                <span class="verification-status verification-expired">Expired</span>
              {% else %}
                <span class="verification-status verification-unused">Pending</span>
              {% endif %}
            </td>
            <td><span class="{% if verification.attempts >= 5 %}text-danger{% elif verification.attempts >= 3 %}text-warning{% endif %}">{{ verification.attempts }}/5</span></td>
            <td>{% if verification.ip_address %}<code>{{ verification.ip_address }}</code>{% else %}<span class="text-muted">-</span>{% endif %}</td>
            <td>
              <div class="device-info">
                {% if verification.device_info %}
                  <div title="{{ verification.user_agent }}">{{ verification.device_info }}</div>
                {% elif verification.user_agent %}
                  <div title="{{ verification.user_agent }}">{{ verification.user_agent|truncatechars:30 }}</div>
                {% else %}
                  <span class="text-muted">-</span>
                {% endif %}
              </div>
            </td>
            <td><div>{{ verification.created_at|date:'M j, Y' }}</div><small class="text-muted">{{ verification.created_at|time:'g:i A' }}</small></td>
            <td><div>{{ verification.expires_at|date:'M j, Y' }}</div><small class="text-muted">{{ verification.expires_at|time:'g:i A' }}</small></td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
    {% if verifications.has_other_pages %}
      <div class="pagination">
        {% if verifications.has_previous %}
          <a href="?{{ request.GET.urlencode }}&verifications_page={{ verifications.previous_page_number }}">&laquo; Previous</a>
        {% endif %}
        <span class="current">Page {{ verifications.number }} of {{ verifications.paginator.num_pages }}</span>
        {% if verifications.has_next %}
          <a href="?{{ request.GET.urlencode }}&verifications_page={{ verifications.next_page_number }}">Next &raquo;</a>
        {% endif %}
      </div>
    {% endif %}
  </div>
{% else %}
  <div class="empty-state">
    <p>No verification codes found for the selected filters.</p>
  </div>
{% endif %}
