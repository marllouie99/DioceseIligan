{% load static %}
<div class="brand">
  <div class="logo-badge">CC</div>
  <span>ChurchConnect</span>
</div>
<hr/>
<nav>
  <ul class="nav">
    {% if user.is_superuser and is_admin_mode %}
    <!-- Admin Mode: show only Super Admin dashboard link -->
    <li>
      <a class="{% if active == 'super_admin' or active == 'super_admin_profile' %}active{% endif %}" 
         {% if active == 'super_admin' or active == 'super_admin_profile' %}aria-current="page"{% endif %}
         href="{% url 'core:super_admin_dashboard' %}">
        <span class="icon"><svg viewBox="0 0 24 24" fill="none"><rect x="3" y="3" width="7" height="7" stroke="currentColor" stroke-width="2"/><rect x="14" y="3" width="7" height="7" stroke="currentColor" stroke-width="2"/><rect x="14" y="14" width="7" height="7" stroke="currentColor" stroke-width="2"/><rect x="3" y="14" width="7" height="7" stroke="currentColor" stroke-width="2"/></svg></span>
        Overview
      </a>
    </li>
    <li>
      <a class="{% if active == 'super_admin_churches' %}active{% endif %}" 
         {% if active == 'super_admin_churches' %}aria-current="page"{% endif %}
         href="{% url 'core:super_admin_churches' %}">
        <span class="icon"><svg viewBox="0 0 24 24" fill="none"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z" stroke="currentColor" stroke-width="2"/><circle cx="12" cy="10" r="3" stroke="currentColor" stroke-width="2"/></svg></span>
        Churches
      </a>
    </li>
    <li>
      <a class="{% if active == 'super_admin_users' %}active{% endif %}" 
         {% if active == 'super_admin_users' %}aria-current="page"{% endif %}
         href="{% url 'core:super_admin_users' %}">
        <span class="icon"><svg viewBox="0 0 24 24" fill="none"><path d="M17 21v-2a4 4 0 00-4-4H5a4 4 0 00-4 4v2" stroke="currentColor" stroke-width="2"/><circle cx="9" cy="7" r="4" stroke="currentColor" stroke-width="2"/><path d="M23 21v-2a4 4 0 00-3-3.87" stroke="currentColor" stroke-width="2"/><path d="M16 3.13a4 4 0 010 7.75" stroke="currentColor" stroke-width="2"/></svg></span>
        Users
      </a>
    </li>
    <li>
      <a class="{% if active == 'super_admin_activities' %}active{% endif %}" 
         {% if active == 'super_admin_activities' %}aria-current="page"{% endif %}
         href="{% url 'core:super_admin_user_activities' %}">
        <span class="icon"><svg viewBox="0 0 24 24" fill="none"><path d="M12 8v4l3 3" stroke="currentColor" stroke-width="2"/><circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/></svg></span>
        User Activities
      </a>
    </li>
    <li>
      <a class="{% if active == 'super_admin_posts' %}active{% endif %}"
         {% if active == 'super_admin_posts' %}aria-current="page"{% endif %}
         href="{% url 'core:super_admin_posts' %}">
        <span class="icon"><svg viewBox="0 0 24 24" fill="none"><rect x="3" y="4" width="18" height="14" rx="2" stroke="currentColor" stroke-width="2"/><line x1="7" y1="8" x2="17" y2="8" stroke="currentColor" stroke-width="2"/><line x1="7" y1="12" x2="14" y2="12" stroke="currentColor" stroke-width="2"/></svg></span>
        Posts
      </a>
    </li>
    <li>
      <a class="{% if active == 'super_admin_services' %}active{% endif %}"
         {% if active == 'super_admin_services' %}aria-current="page"{% endif %}
         href="{% url 'core:super_admin_services' %}">
        <span class="icon"><svg viewBox="0 0 24 24" fill="none"><path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20" stroke="currentColor" stroke-width="2"/><path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z" stroke="currentColor" stroke-width="2"/></svg></span>
        Services
      </a>
    </li>
    <li>
      <a class="{% if active == 'super_admin_bookings' %}active{% endif %}"
         {% if active == 'super_admin_bookings' %}aria-current="page"{% endif %}
         href="{% url 'core:super_admin_bookings' %}">
        <span class="icon"><svg viewBox="0 0 24 24" fill="none"><rect x="3" y="4" width="18" height="18" rx="2" ry="2" stroke="currentColor" stroke-width="2"/><line x1="16" y1="2" x2="16" y2="6" stroke="currentColor" stroke-width="2"/><line x1="8" y1="2" x2="8" y2="6" stroke="currentColor" stroke-width="2"/><line x1="3" y1="10" x2="21" y2="10" stroke="currentColor" stroke-width="2"/></svg></span>
        Bookings
      </a>
    </li>
    {% else %}
    <li>
      <a class="{% if active == 'home' %}active{% endif %}" 
         {% if active == 'home' %}aria-current="page"{% endif %}
         href="{% url 'dashboard' %}">
        <span class="icon"><svg viewBox="0 0 24 24" fill="none"><path d="M3 9l9-7 9 7v11a2 2 0 01-2 2H5a2 2 0 01-2-2z" stroke="currentColor" stroke-width="2"/><polyline points="9,22 9,12 15,12 15,22" stroke="currentColor" stroke-width="2"/></svg></span>
        Home
      </a>
    </li>
    <li>
      <a class="{% if active == 'discover' %}active{% endif %}" 
         {% if active == 'discover' %}aria-current="page"{% endif %}
         href="{% url 'core:discover' %}">
        <span class="icon"><svg viewBox="0 0 24 24" fill="none"><circle cx="11" cy="11" r="8" stroke="currentColor" stroke-width="2"/><path d="m21 21-4.35-4.35" stroke="currentColor" stroke-width="2"/></svg></span>
        Discover Churches
      </a>
    </li>
    <li>
      <a class="{% if active == 'events' %}active{% endif %}" 
         {% if active == 'events' %}aria-current="page"{% endif %}
         href="{% url 'core:events' %}">
        <span class="icon"><svg viewBox="0 0 24 24" fill="none"><rect x="3" y="4" width="18" height="18" rx="2" ry="2" stroke="currentColor" stroke-width="2"/><line x1="16" y1="2" x2="16" y2="6" stroke="currentColor" stroke-width="2"/><line x1="8" y1="2" x2="8" y2="6" stroke="currentColor" stroke-width="2"/><line x1="3" y1="10" x2="21" y2="10" stroke="currentColor" stroke-width="2"/></svg></span>
        Events
      </a>
    </li>
    <li>
      <a class="{% if active == 'appointments' %}active{% endif %}" 
         {% if active == 'appointments' %}aria-current="page"{% endif %}
         href="{% url 'core:appointments' %}">
        <span class="icon"><svg viewBox="0 0 24 24" fill="none"><rect x="3" y="4" width="18" height="18" rx="2" ry="2" stroke="currentColor" stroke-width="2"/><line x1="16" y1="2" x2="16" y2="6" stroke="currentColor" stroke-width="2"/><line x1="8" y1="2" x2="8" y2="6" stroke="currentColor" stroke-width="2"/><line x1="3" y1="10" x2="21" y2="10" stroke="currentColor" stroke-width="2"/></svg></span>
        My Appointments
      </a>
    </li>
    
    <li>
      <a class="{% if active == 'following' %}active{% endif %}" 
         {% if active == 'following' %}aria-current="page"{% endif %}
         href="{% url 'core:following' %}">
        <span class="icon"><svg viewBox="0 0 24 24" fill="none"><path d="M16 21v-2a4 4 0 00-4-4H6a4 4 0 00-4 4v2" stroke="currentColor" stroke-width="2"/><circle cx="9" cy="7" r="4" stroke="currentColor" stroke-width="2"/><path d="M22 21v-2a4 4 0 00-3-3.87" stroke="currentColor" stroke-width="2"/><path d="M16 3.13a4 4 0 010 7.75" stroke="currentColor" stroke-width="2"/></svg></span>
        Following
      </a>
    </li>
    {% endif %}
  </ul>
</nav>

<!-- Recent Activity Section -->
{% if not user.is_superuser or not is_admin_mode %}
<div class="sidebar-activity-section">
  <hr/>
  <h3 class="sidebar-section-title">Recent Activity</h3>
  <div class="sidebar-activity-list">
    {% if recent_activities %}
      {% for activity in recent_activities %}
        <div class="sidebar-activity-item">
          <div class="sidebar-activity-icon">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              {% if activity.icon_class == 'heart' %}
                <path d="M20.84 4.61a5.5 5.5 0 00-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 00-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 000-7.78z"/>
              {% elif activity.icon_class == 'message-circle' %}
                <path d="M21 15a2 2 0 01-2 2H7l-4 4V5a2 2 0 012-2h14a2 2 0 012 2z"/>
              {% elif activity.icon_class == 'bookmark' %}
                <path d="M19 21l-7-5-7 5V5a2 2 0 012-2h10a2 2 0 012 2z"/>
              {% elif activity.icon_class == 'eye' %}
                <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/>
                <circle cx="12" cy="12" r="3"/>
              {% elif activity.icon_class == 'share' %}
                <circle cx="18" cy="5" r="3"/>
                <circle cx="6" cy="12" r="3"/>
                <circle cx="18" cy="19" r="3"/>
                <line x1="8.59" y1="13.51" x2="15.42" y2="17.49"/>
                <line x1="15.41" y1="6.51" x2="8.59" y2="10.49"/>
              {% elif activity.icon_class == 'user-plus' %}
                <path d="M16 21v-2a4 4 0 00-4-4H8a4 4 0 00-4 4v2"/>
                <circle cx="12" cy="7" r="4"/>
                <line x1="20" y1="8" x2="20" y2="14"/>
                <line x1="23" y1="11" x2="17" y2="11"/>
              {% elif activity.icon_class == 'user-minus' %}
                <path d="M16 21v-2a4 4 0 00-4-4H8a4 4 0 00-4 4v2"/>
                <circle cx="12" cy="7" r="4"/>
                <line x1="23" y1="11" x2="17" y2="11"/>
              {% elif activity.icon_class == 'calendar-plus' %}
                <rect x="3" y="4" width="18" height="18" rx="2" ry="2"/>
                <line x1="16" y1="2" x2="16" y2="6"/>
                <line x1="8" y1="2" x2="8" y2="6"/>
                <line x1="3" y1="10" x2="21" y2="10"/>
                <line x1="12" y1="14" x2="12" y2="18"/>
                <line x1="10" y1="16" x2="14" y2="16"/>
              {% elif activity.icon_class == 'edit' %}
                <path d="M11 4H4a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2v-7"/>
                <path d="M18.5 2.5a2.121 2.121 0 013 3L12 15l-4 1 1-4 9.5-9.5z"/>
              {% elif activity.icon_class == 'star' %}
                <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/>
              {% elif activity.icon_class == 'log-in' %}
                <path d="M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4"/>
                <polyline points="10,17 15,12 10,7"/>
                <line x1="15" y1="12" x2="3" y2="12"/>
              {% elif activity.icon_class == 'user' %}
                <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
                <circle cx="12" cy="7" r="4"/>
              {% else %}
                <circle cx="12" cy="12" r="10"/>
                <polyline points="12,6 12,12 16,14"/>
              {% endif %}
            </svg>
          </div>
          <div class="sidebar-activity-content">
            <p class="sidebar-activity-text">{{ activity.activity_description }}</p>
            <span class="sidebar-activity-time">{{ activity.created_at|timesince }} ago</span>
          </div>
        </div>
      {% endfor %}
      <div class="sidebar-activity-footer">
        <a href="{% url 'manage_profile' %}#recent-activity-section" class="sidebar-activity-see-more">
          See More Activities
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="width: 16px; height: 16px; display: inline-block; vertical-align: middle; margin-left: 4px;">
            <polyline points="9,18 15,12 9,6"/>
          </svg>
        </a>
      </div>
    {% else %}
      <div class="sidebar-empty-activity">
        <p class="muted">No recent activity</p>
      </div>
    {% endif %}
  </div>
</div>
{% endif %}
