{% load media_extras %}
<div class="church-header">
  <div class="church-cover">
    {% if church.cover_image %}
      <img src="{{ church.cover_image|storage_url }}" alt="{{ church.name }}" class="cover-image" width="1600" height="220" decoding="async">
    {% else %}
      <div class="cover-placeholder">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0118 0z"/>
          <circle cx="12" cy="10" r="3"/>
        </svg>
      </div>
    {% endif %}
  </div>
  
  <div class="church-info">
    <div class="church-avatar">
      {% if church.logo %}
        <img src="{{ church.logo|storage_url }}" alt="{{ church.name }}" class="avatar-image" width="96" height="96" decoding="async">
      {% else %}
        <div class="avatar-placeholder">{{ church.initial }}</div>
      {% endif %}
    </div>
    
    <div class="church-details">
      <h1 class="church-name">
        {{ church.name }}
        {% if church.is_verified %}
          {% include 'partials/verified_badge.html' %}
        {% endif %}
      </h1>
      <div class="church-location-row">
        <p class="church-location">
          <a href="#" class="location-link" 
             data-lat="{{ church.latitude }}" 
             data-lng="{{ church.longitude }}" 
             data-address="{{ church.full_address }}"
             title="Open in maps">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="location-icon">
              <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0118 0z"/>
              <circle cx="12" cy="10" r="3"/>
            </svg>
            {{ church.street_location }}
          </a>
        </p>
        <span class="denomination-badge">{{ church.get_denomination_display }}</span>
      </div>
      <div class="church-badges">
      </div>
      
      <div class="church-stats">
        <div class="stat-item">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M17 21v-2a4 4 0 00-4-4H5a4 4 0 00-4 4v2"/>
            <circle cx="9" cy="7" r="4"/>
            <path d="M23 21v-2a4 4 0 00-3-3.87"/>
            <path d="M16 3.13a4 4 0 010 7.75"/>
          </svg>
          <span class="stat-number">{{ church.follower_count }}</span>
          <span class="stat-label">Followers</span>
        </div>
        <button class="follow-btn {% if is_following %}following{% endif %}" 
                data-church-id="{{ church.id }}"
                data-action="{% if is_following %}unfollow{% else %}follow{% endif %}">
          {% if is_following %}
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M16 21v-2a4 4 0 00-4-4H5a4 4 0 00-4 4v2"/>
              <circle cx="9" cy="7" r="4"/>
              <path d="M23 21v-2a4 4 0 00-3-3.87"/>
              <path d="M16 3.13a4 4 0 010 7.75"/>
            </svg>
            Following
          {% else %}
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M16 21v-2a4 4 0 00-4-4H5a4 4 0 00-4 4v2"/>
              <circle cx="9" cy="7" r="4"/>
              <path d="M23 21v-2a4 4 0 00-3-3.87"/>
              <path d="M16 3.13a4 4 0 010 7.75"/>
            </svg>
            Follow
          {% endif %}
        </button>
        
        <button class="message-btn" data-church-id="{{ church.id }}">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>
          </svg>
          Message
        </button>
      </div>
    </div>
    
    <div class="church-actions">
      <!-- Manage Church button removed -->
    </div>
  </div>
</div>


